<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Payment Gateway | QRIS, Dana & GoPay</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }

        body {
            background-color: #0a0a0a;
            color: #f0f0f0;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
        }

        /* Loading Screen */
        #loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #0a0a0a;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.5s ease;
        }

        .loading-logo {
            font-size: 2.5rem;
            color: #00ff88;
            margin-bottom: 30px;
            font-weight: 700;
            letter-spacing: 2px;
        }

        .loading-spinner {
            width: 60px;
            height: 60px;
            border: 4px solid rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            border-top-color: #00ff88;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }

        .loading-text {
            font-size: 1.2rem;
            color: #aaa;
            letter-spacing: 1px;
        }

        .loading-dots {
            display: inline-block;
            width: 20px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Main Container */
        .container {
            max-width: 500px;
            width: 100%;
            background: linear-gradient(145deg, #121212, #0a0a0a);
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.05);
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInUp 0.8s forwards 0.5s;
        }

        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Header */
        .header {
            background: linear-gradient(90deg, #000000, #111111);
            padding: 25px 30px;
            text-align: center;
            border-bottom: 1px solid rgba(0, 255, 136, 0.2);
        }

        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-bottom: 10px;
        }

        .logo-icon {
            color: #00ff88;
            font-size: 1.8rem;
        }

        .logo-text {
            font-size: 1.8rem;
            font-weight: 700;
            background: linear-gradient(90deg, #00ff88, #00cc6a);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .subtitle {
            color: #aaa;
            font-size: 0.9rem;
            letter-spacing: 1px;
        }

        /* Content */
        .content {
            padding: 30px;
        }

        /* Payment Method Selection */
        .payment-methods {
            margin-bottom: 25px;
        }

        .methods-title {
            font-size: 1.2rem;
            margin-bottom: 15px;
            color: #f0f0f0;
            font-weight: 600;
        }

        .methods-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }

        .method-card {
            background-color: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .method-card:hover {
            transform: translateY(-3px);
            background-color: rgba(255, 255, 255, 0.08);
        }

        .method-card.active {
            border-color: #00ff88;
            background-color: rgba(0, 255, 136, 0.1);
        }

        .method-icon {
            font-size: 1.8rem;
            margin-bottom: 8px;
        }

        .method-name {
            font-size: 0.9rem;
            font-weight: 500;
        }

        /* Payment Info */
        .payment-info {
            background-color: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 25px;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .payment-title {
            font-size: 1.3rem;
            margin-bottom: 15px;
            color: #f0f0f0;
            text-align: center;
            font-weight: 600;
        }

        .payment-amount {
            font-size: 2.5rem;
            font-weight: 700;
            text-align: center;
            color: #00ff88;
            margin-bottom: 20px;
            text-shadow: 0 0 10px rgba(0, 255, 136, 0.3);
        }

        /* Amount Selection */
        .amount-selection {
            margin-bottom: 25px;
        }

        .amount-title {
            font-size: 1.1rem;
            margin-bottom: 15px;
            color: #f0f0f0;
            font-weight: 600;
        }

        .amount-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-bottom: 15px;
        }

        .amount-option {
            background-color: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid transparent;
            font-weight: 500;
        }

        .amount-option:hover {
            background-color: rgba(255, 255, 255, 0.08);
        }

        .amount-option.active {
            border-color: #00ff88;
            background-color: rgba(0, 255, 136, 0.1);
            color: #00ff88;
        }

        .custom-amount {
            display: flex;
            gap: 10px;
        }

        .custom-amount input {
            flex: 1;
            background-color: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 12px 15px;
            color: #f0f0f0;
            font-size: 1rem;
            outline: none;
        }

        .custom-amount input:focus {
            border-color: #00ff88;
        }

        .custom-amount button {
            background-color: #00ff88;
            color: #000;
            border: none;
            border-radius: 10px;
            padding: 0 20px;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .custom-amount button:hover {
            background-color: #00cc6a;
        }

        /* Payment Details */
        .payment-details {
            background-color: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 25px;
            border: 1px solid rgba(255, 255, 255, 0.05);
            display: none;
        }

        .payment-details.active {
            display: block;
        }

        .details-title {
            font-size: 1.1rem;
            margin-bottom: 15px;
            color: #00ff88;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .detail-item {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            font-size: 0.95rem;
        }

        .detail-item:last-child {
            border-bottom: none;
        }

        .detail-label {
            color: #aaa;
        }

        .detail-value {
            font-weight: 600;
            color: #f0f0f0;
        }

        .copy-btn {
            background-color: rgba(0, 255, 136, 0.1);
            color: #00ff88;
            border: 1px solid #00ff88;
            border-radius: 6px;
            padding: 4px 10px;
            font-size: 0.8rem;
            cursor: pointer;
            margin-left: 10px;
            transition: all 0.3s ease;
        }

        .copy-btn:hover {
            background-color: rgba(0, 255, 136, 0.2);
        }

        /* QR Code Section */
        .qris-section {
            text-align: center;
            margin-bottom: 30px;
            display: none;
        }

        .qris-section.active {
            display: block;
        }

        .qris-title {
            font-size: 1.2rem;
            margin-bottom: 15px;
            color: #f0f0f0;
            font-weight: 500;
        }

        .qris-container {
            background-color: #fff;
            border-radius: 15px;
            padding: 20px;
            display: inline-block;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
            margin-bottom: 15px;
            border: 2px solid rgba(0, 255, 136, 0.3);
        }

        .qris-image {
            width: 250px;
            height: 250px;
            border-radius: 10px;
            object-fit: cover;
        }

        /* Instructions */
        .instructions {
            background-color: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 25px;
        }

        .instructions-title {
            font-size: 1.1rem;
            margin-bottom: 15px;
            color: #00ff88;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .instructions-list {
            list-style-type: none;
        }

        .instructions-list li {
            padding: 8px 0;
            font-size: 0.9rem;
            display: flex;
            align-items: flex-start;
            gap: 10px;
        }

        .instructions-list li i {
            color: #00ff88;
            margin-top: 3px;
            font-size: 0.8rem;
        }

        /* Buttons */
        .action-buttons {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        .btn {
            flex: 1;
            padding: 15px;
            border-radius: 12px;
            border: none;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .btn-primary {
            background-color: #00ff88;
            color: #000;
        }

        .btn-primary:hover {
            background-color: #00cc6a;
            transform: translateY(-2px);
        }

        .btn-secondary {
            background-color: rgba(255, 255, 255, 0.1);
            color: #f0f0f0;
        }

        .btn-secondary:hover {
            background-color: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        /* Footer */
        .footer {
            text-align: center;
            padding: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.05);
            color: #777;
            font-size: 0.8rem;
        }

        .timer {
            color: #00ff88;
            font-weight: 600;
        }

        /* Success Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            z-index: 10000;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: linear-gradient(145deg, #121212, #0a0a0a);
            border-radius: 20px;
            padding: 40px;
            max-width: 450px;
            width: 90%;
            text-align: center;
            border: 1px solid rgba(0, 255, 136, 0.3);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
        }

        .modal-icon {
            font-size: 4rem;
            color: #00ff88;
            margin-bottom: 20px;
        }

        .modal-title {
            font-size: 1.8rem;
            margin-bottom: 15px;
            color: #f0f0f0;
        }

        .modal-message {
            color: #aaa;
            margin-bottom: 25px;
            line-height: 1.5;
        }

        .whatsapp-btn {
            background-color: #25D366;
            color: white;
            border: none;
            border-radius: 12px;
            padding: 15px 30px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin: 0 auto;
            transition: all 0.3s ease;
        }

        .whatsapp-btn:hover {
            background-color: #128C7E;
            transform: translateY(-2px);
        }

        /* Responsive */
        @media (max-width: 576px) {
            .container {
                max-width: 100%;
            }
            
            .content {
                padding: 20px;
            }
            
            .methods-grid {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .amount-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .action-buttons {
                flex-direction: column;
            }
            
            .qris-image {
                width: 220px;
                height: 220px;
            }
            
            .payment-amount {
                font-size: 2rem;
            }
        }

        /* Additional decorative elements */
        .decoration {
            position: absolute;
            width: 300px;
            height: 300px;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(0, 255, 136, 0.05) 0%, rgba(0, 255, 136, 0) 70%);
            z-index: -1;
        }

        .decoration-1 {
            top: -150px;
            right: -150px;
        }

        .decoration-2 {
            bottom: -150px;
            left: -150px;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.03) 0%, rgba(255, 255, 255, 0) 70%);
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen">
        <div class="loading-logo">PAYMENT</div>
        <div class="loading-spinner"></div>
        <div class="loading-text">Mempersiapkan sistem pembayaran<span class="loading-dots"></span></div>
    </div>

    <!-- Success Modal -->
    <div id="successModal" class="modal">
        <div class="modal-content">
            <div class="modal-icon">
                <i class="fas fa-check-circle"></i>
            </div>
            <h2 class="modal-title">Pembayaran Berhasil!</h2>
            <p class="modal-message">Terima kasih telah melakukan pembayaran. Silakan konfirmasi ke admin untuk verifikasi transaksi.</p>
            <button class="whatsapp-btn" id="whatsappBtn">
                <i class="fab fa-whatsapp"></i> Hubungi Admin via WhatsApp
            </button>
            <p style="margin-top: 20px; color: #777; font-size: 0.9rem;">Anda akan diarahkan ke WhatsApp dalam 5 detik...</p>
        </div>
    </div>

    <!-- Decorative Background Elements -->
    <div class="decoration decoration-1"></div>
    <div class="decoration decoration-2"></div>

    <!-- Main Container -->
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="logo">
                <i class="fas fa-credit-card logo-icon"></i>
                <div class="logo-text">PAYMENT GATEWAY</div>
            </div>
            <div class="subtitle">QRIS • Dana • GoPay</div>
        </div>

        <!-- Content -->
        <div class="content">
            <!-- Payment Methods -->
            <div class="payment-methods">
                <div class="methods-title">Pilih Metode Pembayaran</div>
                <div class="methods-grid">
                    <div class="method-card active" data-method="qris">
                        <div class="method-icon">
                            <i class="fas fa-qrcode"></i>
                        </div>
                        <div class="method-name">QRIS</div>
                    </div>
                    <div class="method-card" data-method="dana">
                        <div class="method-icon" style="color: #00D1FF;">
                            <i class="fas fa-wallet"></i>
                        </div>
                        <div class="method-name">DANA</div>
                    </div>
                    <div class="method-card" data-method="gopay">
                        <div class="method-icon" style="color: #00AA13;">
                            <i class="fas fa-mobile-alt"></i>
                        </div>
                        <div class="method-name">GoPay</div>
                    </div>
                </div>
            </div>

            <!-- Amount Selection -->
            <div class="amount-selection">
                <div class="amount-title">Pilih Nominal Pembayaran</div>
                <div class="amount-grid" id="amountGrid">
                    <!-- Amount options will be generated by JavaScript -->
                </div>
                <div class="custom-amount">
                    <input type="number" id="customAmount" placeholder="Masukkan nominal custom (min Rp 2.000)">
                    <button id="setCustomAmount">Gunakan</button>
                </div>
            </div>

            <!-- Payment Info -->
            <div class="payment-info">
                <div class="payment-title">Total Pembayaran</div>
                <div class="payment-amount" id="displayAmount">Rp 50.000</div>
                <div class="payment-id">
                    <span>ID Transaksi:</span>
                    <span id="transactionId">PAY-9823-5678</span>
                </div>
                <div class="payment-id">
                    <span>Status:</span>
                    <span style="color: #FFA500;">Menunggu Pembayaran</span>
                </div>
            </div>

            <!-- Payment Details (for Dana & GoPay) -->
            <div class="payment-details" id="danaDetails">
                <div class="details-title">
                    <i class="fas fa-info-circle"></i> Detail Pembayaran DANA
                </div>
                <div class="detail-item">
                    <span class="detail-label">Nomor DANA:</span>
                    <span class="detail-value">083129165178</span>
                    <button class="copy-btn" data-copy="083129165178">Salin</button>
                </div>
                <div class="detail-item">
                    <span class="detail-label">Nama Penerima:</span>
                    <span class="detail-value">ST. AZIZAH</span>
                    <button class="copy-btn" data-copy="ST. AZIZAH">Salin</button>
                </div>
                <div class="detail-item">
                    <span class="detail-label">Jumlah Transfer:</span>
                    <span class="detail-value" id="danaAmount">Rp 50.000</span>
                </div>
                <div class="instructions-list" style="margin-top: 15px;">
                    <li><i class="fas fa-check-circle"></i> Buka aplikasi DANA di smartphone Anda</li>
                    <li><i class="fas fa-check-circle"></i> Pilih menu "Kirim" atau "Transfer"</li>
                    <li><i class="fas fa-check-circle"></i> Masukkan nomor DANA di atas</li>
                    <li><i class="fas fa-check-circle"></i> Masukkan jumlah yang sesuai</li>
                    <li><i class="fas fa-check-circle"></i> Konfirmasi dan selesaikan transfer</li>
                </div>
            </div>

            <div class="payment-details" id="gopayDetails">
                <div class="details-title">
                    <i class="fas fa-info-circle"></i> Detail Pembayaran GoPay
                </div>
                <div class="detail-item">
                    <span class="detail-label">Nomor GoPay:</span>
                    <span class="detail-value">085950392510</span>
                    <button class="copy-btn" data-copy="085950392510">Salin</button>
                </div>
                <div class="detail-item">
                    <span class="detail-label">Nama Penerima:</span>
                    <span class="detail-value">LAIBSTORE</span>
                    <button class="copy-btn" data-copy="LAIBSTORE">Salin</button>
                </div>
                <div class="detail-item">
                    <span class="detail-label">Jumlah Transfer:</span>
                    <span class="detail-value" id="gopayAmount">Rp 50.000</span>
                </div>
                <div class="instructions-list" style="margin-top: 15px;">
                    <li><i class="fas fa-check-circle"></i> Buka aplikasi Gojek di smartphone Anda</li>
                    <li><i class="fas fa-check-circle"></i> Pilih menu "GoPay" lalu "Transfer"</li>
                    <li><i class="fas fa-check-circle"></i> Masukkan nomor GoPay di atas</li>
                    <li><i class="fas fa-check-circle"></i> Masukkan jumlah yang sesuai</li>
                    <li><i class="fas fa-check-circle"></i> Konfirmasi dan selesaikan transfer</li>
                </div>
            </div>

            <!-- QRIS Section -->
            <div class="qris-section active" id="qrisSection">
                <div class="qris-title">Scan QR Code Berikut</div>
                <div class="qris-container">
                    <img src="https://image2url.com/images/1765106553166-0670268e-ce8b-4046-b29f-bf98c4fecd9e.jpg" alt="QRIS Code" class="qris-image" id="qrisImage">
                </div>
                <div class="qris-note">
                    Gunakan aplikasi mobile banking, e-wallet, atau aplikasi pembayaran lain yang mendukung QRIS untuk memindai kode di atas.
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="action-buttons">
                <button class="btn btn-secondary" id="resetBtn">
                    <i class="fas fa-redo"></i> Reset
                </button>
                <button class="btn btn-primary" id="payBtn">
                    <i class="fas fa-lock"></i> Bayar Sekarang
                </button>
            </div>

            <!-- Instructions -->
            <div class="instructions">
                <div class="instructions-title">
                    <i class="fas fa-shield-alt"></i> Pembayaran Aman & Terjamin
                </div>
                <ul class="instructions-list">
                    <li>
                        <i class="fas fa-check-circle"></i>
                        <span>Pastikan nominal pembayaran sesuai dengan yang ditampilkan</span>
                    </li>
                    <li>
                        <i class="fas fa-check-circle"></i>
                        <span>Simpan bukti pembayaran untuk konfirmasi</span>
                    </li>
                    <li>
                        <i class="fas fa-check-circle"></i>
                        <span>Transaksi akan diverifikasi otomatis dalam 1-3 menit</span>
                    </li>
                    <li>
                        <i class="fas fa-check-circle"></i>
                        <span>Hubungi admin jika mengalami kendala dalam pembayaran</span>
                    </li>
                </ul>
            </div>
        </div>

        <!-- Footer -->
        <div class="footer">
            <p>Halaman akan diperbarui otomatis saat pembayaran terdeteksi</p>
            <p>Waktu tersisa: <span class="timer" id="timer">10:00</span> menit</p>
            <p style="margin-top: 10px;">&copy; 2023 Payment Gateway. Support: +62 831-7291-6537</p>
        </div>
    </div>

    <script>
        // Data Konfigurasi
        const paymentMethods = {
            qris: {
                name: "QRIS",
                icon: "fas fa-qrcode",
                color: "#00ff88"
            },
            dana: {
                name: "DANA",
                icon: "fas fa-wallet",
                color: "#00D1FF",
                number: "083129165178",
                recipient: "ST. AZIZAH"
            },
            gopay: {
                name: "GoPay",
                icon: "fas fa-mobile-alt",
                color: "#00AA13",
                number: "085950392510",
                recipient: "LAIBSTORE"
            }
        };

        const amountOptions = [
            2000, 5000, 10000, 20000, 50000, 75000, 
            100000, 150000, 200000, 250000, 300000, 
            350000, 400000, 450000, 500000
        ];

        const adminWhatsApp = "+6283172916537";

        // State Aplikasi
        let currentMethod = "qris";
        let currentAmount = 50000;
        let timerInterval;
        let paymentTime = 10 * 60; // 10 menit dalam detik

        // DOM Elements
        const loadingScreen = document.getElementById('loading-screen');
        const loadingDots = document.querySelector('.loading-dots');
        const amountGrid = document.getElementById('amountGrid');
        const displayAmount = document.getElementById('displayAmount');
        const danaAmount = document.getElementById('danaAmount');
        const gopayAmount = document.getElementById('gopayAmount');
        const danaDetails = document.getElementById('danaDetails');
        const gopayDetails = document.getElementById('gopayDetails');
        const qrisSection = document.getElementById('qrisSection');
        const customAmountInput = document.getElementById('customAmount');
        const setCustomAmountBtn = document.getElementById('setCustomAmount');
        const payBtn = document.getElementById('payBtn');
        const resetBtn = document.getElementById('resetBtn');
        const successModal = document.getElementById('successModal');
        const whatsappBtn = document.getElementById('whatsappBtn');
        const timerElement = document.getElementById('timer');
        const transactionId = document.getElementById('transactionId');

        // Fungsi untuk format Rupiah
        function formatRupiah(amount) {
            return new Intl.NumberFormat('id-ID', {
                style: 'currency',
                currency: 'IDR',
                minimumFractionDigits: 0
            }).format(amount);
        }

        // Fungsi untuk generate transaction ID
        function generateTransactionId() {
            const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
            let result = 'PAY-';
            for (let i = 0; i < 8; i++) {
                result += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            return result;
        }

        // Inisialisasi amount options
        function initAmountOptions() {
            amountGrid.innerHTML = '';
            amountOptions.forEach(amount => {
                const amountElement = document.createElement('div');
                amountElement.className = `amount-option ${amount === currentAmount ? 'active' : ''}`;
                amountElement.textContent = formatRupiah(amount);
                amountElement.dataset.amount = amount;
                
                amountElement.addEventListener('click', () => {
                    document.querySelectorAll('.amount-option').forEach(opt => {
                        opt.classList.remove('active');
                    });
                    amountElement.classList.add('active');
                    currentAmount = amount;
                    updateAmountDisplay();
                });
                
                amountGrid.appendChild(amountElement);
            });
        }

        // Update tampilan jumlah
        function updateAmountDisplay() {
            displayAmount.textContent = formatRupiah(currentAmount);
            danaAmount.textContent = formatRupiah(currentAmount);
            gopayAmount.textContent = formatRupiah(currentAmount);
            
            // Update transaction ID saat amount berubah
            transactionId.textContent = generateTransactionId();
        }

        // Update tampilan metode pembayaran
        function updatePaymentMethod() {
            // Update method cards
            document.querySelectorAll('.method-card').forEach(card => {
                card.classList.remove('active');
                if (card.dataset.method === currentMethod) {
                    card.classList.add('active');
                }
            });

            // Tampilkan detail yang sesuai
            danaDetails.classList.remove('active');
            gopayDetails.classList.remove('active');
            qrisSection.classList.remove('active');

            if (currentMethod === 'dana') {
                danaDetails.classList.add('active');
            } else if (currentMethod === 'gopay') {
                gopayDetails.classList.add('active');
            } else {
                qrisSection.classList.add('active');
            }
        }

        // Fungsi untuk copy text
        function initCopyButtons() {
            document.querySelectorAll('.copy-btn').forEach(button => {
                button.addEventListener('click', function() {
                    const textToCopy = this.dataset.copy;
                    navigator.clipboard.writeText(textToCopy).then(() => {
                        const originalText = this.textContent;
                        this.textContent = 'Tersalin!';
                        this.style.backgroundColor = '#00ff88';
                        this.style.color = '#000';
                        
                        setTimeout(() => {
                            this.textContent = originalText;
                            this.style.backgroundColor = '';
                            this.style.color = '';
                        }, 2000);
                    });
                });
            });
        }

        // Fungsi untuk timer pembayaran
        function startPaymentTimer() {
            clearInterval(timerInterval);
            paymentTime = 10 * 60; // Reset ke 10 menit
            
            timerInterval = setInterval(() => {
                const minutes = Math.floor(paymentTime / 60);
                const seconds = paymentTime % 60;
                
                timerElement.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                
                if (paymentTime <= 0) {
                    clearInterval(timerInterval);
                    timerElement.textContent = "00:00";
                    alert("Waktu pembayaran telah habis. Silakan mulai transaksi baru.");
                }
                
                paymentTime--;
            }, 1000);
        }

        // Fungsi untuk simulasi pembayaran
        function simulatePayment() {
            // Tampilkan modal sukses
            successModal.style.display = 'flex';
            
            // Set timeout untuk redirect ke WhatsApp
            setTimeout(() => {
                redirectToWhatsApp();
            }, 5000);
            
            // Reset timer
            clearInterval(timerInterval);
        }

        // Fungsi untuk redirect ke WhatsApp
        function redirectToWhatsApp() {
            const message = `Halo admin, saya sudah melakukan pembayaran dengan detail berikut:\n\nID Transaksi: ${transactionId.textContent}\nMetode: ${paymentMethods[currentMethod].name}\nJumlah: ${formatRupiah(currentAmount)}\n\nMohon verifikasi pembayaran saya. Terima kasih.`;
            const encodedMessage = encodeURIComponent(message);
            const whatsappUrl = `https://wa.me/${adminWhatsApp}?text=${encodedMessage}`;
            window.open(whatsappUrl, '_blank');
            
            // Tutup modal setelah redirect
            setTimeout(() => {
                successModal.style.display = 'none';
            }, 1000);
        }

        // Inisialisasi aplikasi
        function initApp() {
            // Setup loading screen
            let dotCount = 0;
            const dotInterval = setInterval(() => {
                dotCount = (dotCount + 1) % 4;
                loadingDots.textContent = '.'.repeat(dotCount);
            }, 500);
            
            setTimeout(() => {
                loadingScreen.style.opacity = '0';
                clearInterval(dotInterval);
                
                setTimeout(() => {
                    loadingScreen.style.display = 'none';
                }, 500);
                
                // Inisialisasi komponen
                initAmountOptions();
                updateAmountDisplay();
                updatePaymentMethod();
                initCopyButtons();
                startPaymentTimer();
            }, 3000);

            // Event Listeners
            // Method selection
            document.querySelectorAll('.method-card').forEach(card => {
                card.addEventListener('click', function() {
                    currentMethod = this.dataset.method;
                    updatePaymentMethod();
                });
            });

            // Custom amount
            setCustomAmountBtn.addEventListener('click', () => {
                const customAmount = parseInt(customAmountInput.value);
                if (customAmount && customAmount >= 2000 && customAmount <= 500000) {
                    currentAmount = customAmount;
                    updateAmountDisplay();
                    
                    // Update active amount option
                    document.querySelectorAll('.amount-option').forEach(opt => {
                        opt.classList.remove('active');
                    });
                    
                    // Tampilkan notifikasi
                    alert(`Nominal berhasil diubah menjadi ${formatRupiah(currentAmount)}`);
                } else {
                    alert('Masukkan nominal antara Rp 2.000 sampai Rp 500.000');
                }
            });

            // Pay button
            payBtn.addEventListener('click', () => {
                if (confirm(`Anda akan melakukan pembayaran ${formatRupiah(currentAmount)} via ${paymentMethods[currentMethod].name}. Lanjutkan?`)) {
                    simulatePayment();
                }
            });

            // Reset button
            resetBtn.addEventListener('click', () => {
                if (confirm('Reset semua pilihan ke default?')) {
                    currentMethod = 'qris';
                    currentAmount = 50000;
                    customAmountInput.value = '';
                    updatePaymentMethod();
                    updateAmountDisplay();
                    
                    document.querySelectorAll('.amount-option').forEach(opt => {
                        opt.classList.remove('active');
                        if (parseInt(opt.dataset.amount) === currentAmount) {
                            opt.classList.add('active');
                        }
                    });
                    
                    startPaymentTimer();
                }
            });

            // WhatsApp button in modal
            whatsappBtn.addEventListener('click', redirectToWhatsApp);

            // Handle QRIS image error
            document.getElementById('qrisImage').addEventListener('error', function() {
                this.src = 'https://api.qrserver.com/v1/create-qr-code/?size=250x250&data=https://example.com/qris-payment&format=jpg';
                console.log("Menggunakan QR Code alternatif");
            });

            // Handle custom amount input
            customAmountInput.addEventListener('input', function() {
                let value = this.value.replace(/\D/g, '');
                if (value) {
                    value = parseInt(value);
                    if (value > 500000) value = 500000;
                    if (value < 2000) value = 2000;
                    this.value = value;
                }
            });
        }

        // Jalankan aplikasi saat DOM siap
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>